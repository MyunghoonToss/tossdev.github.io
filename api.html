<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>토스 결제 API</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="shortcut icon" href="https://static.toss.im/tds/favicon/favicon.ico"/>
<link rel="icon" type="image/png" sizes="16x16" href="https://static.toss.im/tds/favicon/favicon-16x16.png"/>
<link rel="icon" type="image/png" sizes="32x32" href="https://static.toss.im/tds/favicon/favicon-32x32.png"/>
<link rel="icon" type="image/png" sizes="48x48" href="https://static.toss.im/tds/favicon/favicon-48x48.png"/>
<link rel="icon" type="image/png" sizes="196x196" href="https://static.toss.im/tds/favicon/favicon-196x196.png"/>
<link rel="apple-touch-icon" sizes="57x57" href="https://static.toss.im/tds/favicon/apple-touch-icon-57x57.png"/>
<link rel="apple-touch-icon" sizes="72x72" href="https://static.toss.im/tds/favicon/apple-touch-icon-72x72.png"/>
<link rel="apple-touch-icon" sizes="114x114" href="https://static.toss.im/tds/favicon/apple-touch-icon-114x114.png"/>
<link rel="apple-touch-icon" sizes="120x120" href="https://static.toss.im/tds/favicon/apple-touch-icon-120x120.png"/>
<link rel="apple-touch-icon" sizes="144x144" href="https://static.toss.im/tds/favicon/apple-touch-icon-144x144.png"/>
<link rel="apple-touch-icon" sizes="152x152" href="https://static.toss.im/tds/favicon/apple-touch-icon-152x152.png"/>
<meta name="msapplication-TileImage" content="https://static.toss.im/tds/favicon/mstile-144x144.png"/>

    <!-- stylesheets -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" integrity="sha512-dTfge/zgoMYpP7QbHy4gWMEGsbsdZeCXz7irItjcC3sPUFtf0kuFbDz/ixG7ArTxmDjLXDmezHubeNikyKGVyQ==" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="https://static.toss.im/tds/current/css/tds.min.css">
    <link rel="stylesheet" type="text/css" href="css/prism.css" />
    <link rel="stylesheet" type="text/css" href="css/tossdev.css" />

    <!-- javascript -->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.0/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js" integrity="sha512-K1qjQ+NcF2TYO/eI3M6v8EiNYZfA95pQumfvcVrTHtwQVDG+aHRqLi/ETn2uB+1JqwYqVG3LIvdm9lj6imS/pQ==" crossorigin="anonymous"></script>
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
</head>

<body id="docs" data-spy="scroll" data-target="#guide">
    <!-- Google Tag Manager -->
    <noscript>
        <iframe src="//www.googletagmanager.com/ns.html?id=GTM-TPTMLG" height="0" width="0" style="display:none;visibility:hidden"></iframe>
    </noscript>
    <script>
        (function (w, d, s, l, i) {
            w[l] = w[l] || [];
            w[l].push({
                'gtm.start': new Date().getTime(),
                event: 'gtm.js'
            });
            var f = d.getElementsByTagName(s)[0],
                j = d.createElement(s),
                dl = l != 'dataLayer' ? '&l=' + l : '';
            j.async = true;
            j.src =
                '//www.googletagmanager.com/gtm.js?id=' + i + dl;
            f.parentNode.insertBefore(j, f);
        })(window, document, 'script', 'dataLayer', 'GTM-TPTMLG');
    </script>
    <!-- End Google Tag Manager -->
    <div id="guide">
      <div class="logo">
        <a href="index.html">
          <img class="logo-img" src="https://static.toss.im/tds/icon/svg/logo-only-icon.svg" alt="">
          <span>결제 연동 가이드</span>
        </a>
      </div>
        <ul class="menu nav">
            <h5>결제 API</h5>
            <li>
                <a href="#intro">소개</a>
            </li>
            <li>
                <a href="#state">결제 상태</a>
            </li>
            <li>
                <a href="#httpResponse">HTTP 응답 코드</a>
            </li>
            <h5>API 목록</h5>
            <li>
                <a href="#payments">결제 생성</a>
            </li>
            <li>
                <a href="#resultcallback">결제 결과 callback</a>
            </li>
            <li>
                <a href="#execute">가맹점 승인</a>
            </li>
            <li>
                <a href="#cancel">결제 취소</a>
            </li>
            <li>
                <a href="#refunds">결제 환불</a>
            </li>
            <li>
                <a href="#status">결제 상태 확인</a>
            </li>
            <li>
                <a href="#refundStatus">환불 상태 확인</a>
            </li>
        </ul>
    </div>

    <div id="api-docs">
        <div id="methods">
            <div class="languages">
                <a class="language selected" data-lang="php" href="#">PHP</a>
                <a class="language" data-lang="java" href="#">Java</a>
                <a class="language" data-lang="curl" href="#">curl</a>
                <a class="language" data-lang="python" href="#">Python</a>
                <a class="language" data-lang="ruby" href="#">Ruby</a>
                <a class="language" data-lang="aspnet" href="#">ASP</a>
            </div>
            <div class="method" id="intro">
                <div class="method-section clearfix">
                    <div class="method-description">
                        <h3>토스 결제 API 소개</h3>
                        <p>
                            토스를 통한 결제 서비스를 사용하기 위한 API입니다. 토스 결제를 활용한 개발을 처음 시작하신다면, 좀 더 친절한 안내를 먼저 확인해보세요!
                            <br>
                            <br><a href="gettingstarted.html">&gt;&gt; '토스 결제 시작하기' 문서로 바로가기</a>
                        </p>
                        <div class="alert alert-warning" role="alert">
                          <i class="fa fa-exclamation-triangle pull-left" aria-hidden="true" style="margin-top:8px;margin-left:6px"></i>
                            토스 결제는 결제 과정 중의 보안을 위해 pay.toss.im의 결제 API HTTPS는 TLS v1.1 이상만을 지원합니다.
                            SSL은 필수이며 적용이 되어 있지 않은 서버에서는 이용이 불가합니다.                        
                        </div>
                        <p><br><strong>토스 결제 서비스를 지원하는 브라우저는 다음과 같습니다.</strong></p>
                        <p>
                            PC 브라우저, Android, iOS 모두 TLS 1.1 이상의 환경에서 동작이 가능하며, 디바이스 같은 경우 토스 앱의 최소 지원 버전 기준입니다.
                        </p>
                            <ul>
                                <li>IE 11, Safari 7, Chrome 38, Firefox 27 부터 지원</li>
                                <li>IE 9, 10 는 일부 지원 (Window 8.1 이상, Enable TLS 1.1, 1.2)</li>
                                <li>Android 5.0 Lollipop 부터 지원</li>
                                <li>iOS 9 부터 지원</li>
                                <li>Java 를 사용하시는 경우, jdk 1.8 이상 버전 사용을 권장합니다</li>
                            </ul>
                    </div>
                </div>
            </div>
            <div class="method" id="state">
                <div class="method-section clearfix">
                    <div class="method-description">
                        <h3>결제 상태</h3>
                        <p>
                            결제 건이 생성된 후, 결제가 진행됨에 따라 결제 상태가 변경되며, 각 결제 상태마다 판매자 또는 구매자가 요청할 수 있는 행동도 변합니다. 아래는 결제 상태 목록과 각 상태에 대한 설명입니다.
                        </p>
                        <p>
                            생성된 결제의 현재 상태를 파악하려면 <a href="#statusCheck">결제 상태 확인 API</a>를 활용하세요.
                        </p>
                        <div class="info">
                            <h4>결제 상태 목록</h4>
                            <div class="field clearfix">
                                <div class="key">
                                    PAY_STANDBY
                                </div>
                                <div class="desc">
                                    결제 대기 중
                                    <br /> 결제 건이 생성되었고, 구매자의 결제 진행을 대기 중인 상태. 이 상태에서 구매자나 가맹점이 결제를 취소할 수 있습니다. 또한 설정한 '만료 기간'이 도래하면 자동으로 취소됩니다.
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    PAY_APPROVED
                                    <span class="type">수동 승인 설정 시</span>
                                </div>
                                <div class="desc">
                                    구매자 인증 완료
                                    <br /> 결제를 위한 구매자 인증 완료되고, 가맹점의 최종 승인을 기다리는 상태.
                                    <br />(결제 생성 시 'autoExecute'를 false로 설정한 경우에만 이 단계를 거칩니다)
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    PAY_CANCEL
                                </div>
                                <div class="desc">
                                    결제 취소
                                    <br /> 결제가 완료되기 전에 구매자나 가맹점이 결제를 취소한 상태입니다. (결론적으론 금액의 이동 없이 종료된 건)
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    PAY_PROGRESS
                                </div>
                                <div class="desc">
                                    결제 진행 중
                                    <br /> 구매자가 결제를 승인하여 구매자의 계좌에서 결제 금액을 출금 처리 중인 상태입니다.
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    PAY_COMPLETE
                                </div>
                                <div class="desc">
                                    결제 완료
                                    <br /> 구매자 및 가맹점의 결제 승인 및 출금이 정상적으로 완료된 상태입니다
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    REFUND_PROGRESS
                                </div>
                                <div class="desc">
                                    환불 진행 중
                                    <br /> 전액 또는 부분 환불을 진행 중인 상태로, 완료되기 전 까지 다른 환불을 진행할 수 없습니다.
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    REFUND_SUCCESS
                                </div>
                                <div class="desc">
                                    환불 성공
                                    <br /> 전액 또는 부분 환불이 완료되어, 환불 처리한 금액이 구매자의 계좌로 입금 완료된 상태입니다.
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    SETTLEMENT_COMPLETE
                                </div>
                                <div class="desc">
                                    정산 완료
                                    <br /> 결제 완료된 금액에 대해 정산이 완료되어 더 이상 환불이 불가한 상태입니다. (승인일 또는 구매 확정일로부터 1년 경과)
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    SETTLEMENT_REFUND_COMPLETE
                                </div>
                                <div class="desc">
                                    환불 정산 완료
                                    <br />전액 또는 부분 환불에 대한 정산이 완료되어 더 이상 환불이 불가한 상태입니다. (승인일 또는 구매 확정일로부터 1년 경과했거나 전액 환불에 대한 정산 완료된 경우)
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="method-example">
                        <pre>
              <code class="curl">
              </code>
              <code class="java">
              </code>
              <code class="pho">
              </code>
            </pre>
                    </div>
                </div>
            </div>
            <div class="method" id="httpResponse">
                <div class="method-section clearfix">
                    <div class="method-description">
                        <h3>HTTP 응답 코드</h3>
                        <div class="info">
                            <h4>HTTP Response Code</h4>
                            <div class="field clearfix">
                                <div class="key">200</div>
                                <div class="desc">
                                    OK : 정상
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">400</div>
                                <div class="desc">
                                    Bad Request : 파라미터 오류
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">401</div>
                                <div class="desc">
                                    Unauthorized : 가맹점 key 오류
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">404</div>
                                <div class="desc">
                                    Not Found : 존재하지 않는 요청
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">50x</div>
                                <div class="desc">
                                    Server error : 서버 오류
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="method-example">
                        <pre>
              <code class="curl">
              </code>
              <code class="java">
              </code>
              <code class="pho">
              </code>
            </pre>
                    </div>
                </div>
            </div>


            <div class="method" id="payments">
                <div class="method-section clearfix">
                    <div class="method-description">
                        <h3>결제 생성</h3>
                        <p>
                            결제 건을 생성합니다.
                        </p>
                        <p>
                            결제 생성 완료 후, 구매자의 결제 인증을 얻어 완료처리하는 방법은 아래 문서를 참고하세요.
                            <br>
                            <a href="gettingstarted.html#overview-3">토스 결제 시작하기 > 3. 구매자 인증 받기</a>
                        </p>
                        <div class="info">
                            <h4>endpoint</h4>
                            <div class="field clearfix">
                                <div class="key">
                                    (POST)
                                </div>
                                <div class="desc">
                                  https://pay.toss.im/api/v1/payments <br/>
                                </div>
                            </div>
                        </div>
                        <div class="info">
                            <h4>parameters</h4>
                            <div class="field clearfix">
                                <div class="key">
                                    apiKey
                                    <span class="type">string</span>
                                    <span class="required"></span>
                                </div>
                                <div class="desc">
                                    가맹점 key
                                    <br>
                                    <span class="text-muted">웹 브라우저 혹은 외부에 노출되지 않도록 유의해 주시기 바랍니다.</span>
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    orderNo
                                    <span class="type">string</span>
                                    <span class="required"></span>
                                </div>
                                <div class="desc">
                                    가맹점의 상품 주문번호
                                    <br>
                                    <span class="text-muted">주문번호는 50자 이내여야 하고, '숫자, 영문자, 특수문자 _-:.^@'만 사용할 수 있습니다.<br>
                                    가맹점 주문번호 테스트와 라이브 환경 사이에서 중복되지 않도록 가맹점의 관리가 필요합니다. 중복되는 경우, "PAYMENT_EXISTING_PAYMENT" 오류가 발생합니다.
                                    </span>
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    amount
                                    <span class="type">integer</span>
                                    <span class="required"></span>
                                </div>
                                <div class="desc">
                                    결제 금액
                                    <br>
                                    <font color=red>금액과 관련된 모든 파라미터는 Number 형태로 보내주셔야 에러가 발생하지 않습니다.</font>
                                    </span>
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    productDesc
                                    <span class="type">string</span>
                                    <span class="required"></span>
                                </div>
                                <div class="desc">
                                    상품 설명
                                    <br>
                                    <span class="text-muted">상품 설명은 공백으로만 설정할 수 없고, 백슬래시(\)와 따옴표(",')를 포함할 수 없으며 총 255자 이내여야 합니다.
                                    이 값에 한글이 포함되었다면 인코딩에 유의해주세요. </span>
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    retUrl
                                    <span class="type">string</span>
                                    <span class="required"></span>
                                </div>
                                <div class="desc">
                                    Web 결제 완료 후 연결할 웹페이지의 URL (결제 최종 승인 및 완료 처리할 페이지)<br>
                                    <span class="text-muted">결제 완료 화면으로의 이동일 뿐, 정확한 결제 성공 유무를 보장할 수 없으니 반드시 resultCallback 을 통하여 처리하시기 바랍니다. </span>
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    retCancelUrl
                                    <span class="type">string</span>
                                    <span class="required"></span>
                                </div>
                                <div class="desc">
                                    토스 브릿지 페이지에서 사용자가 결제를 중단할때 사용자를 이동시킬 가맹점 페이지<br>
                                    <span class="text-muted">이 값을 사용하면 토스 서버가 retCancelUrl 을 실행시킬 취소 버튼을 생성하고,
                                        구매자는 브라우저나 앱을 종료하지 않고 취소 버튼을 통하여 가맹점이 설정한 URL로 redirect됩니다.<br> 구매자 편의를 위하 반드시 활용해주세요!
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    retAppScheme
                                    <span class="type">string</span>
                                </div>
                                <div class="desc">
                                    App 결제 완료 후 연결할 app scheme (결제 최종 승인 및 완료 처리할 페이지). retAppScheme을 사용할 경우 retUrl은 사용하지 않아도 됩니다. <br>
                                    <span class="text-muted">앱 결제를 이용하는 경우를 대비하여 이 곳에 가맹점 앱 스킴값을 적용하면, 결제 완료 후 토스앱 이동의 이탈을 막고 가맹점 앱으로 redirect 됩니다.</span>
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    autoExecute
                                    <span class="type">boolean</span>
                                </div>
                                <div class="desc">
                                    자동 승인 여부 설정(기본 값: true)
                                    <br />
                                    <br>
                                    <table class="table">
                                        <tr>
                                            <td>true</td>
                                            <td>구매자 인증 완료 시, 바로 결제 완료 처리
                                                <br>(true로 설정하면 반드시 'resultCallback' 값을 설정하고 '결제 완료' callback을 받았을 때만 구매 완료 처리해야합니다)</td>
                                        </tr>
                                        <tr>
                                            <td>false</td>
                                            <td>구매자 인증 완료 후 가맹점의 최종 승인 시 결제 완료 처리
                                                <br>('execute API'를 통해 최종 승인합니다)</td>
                                        </tr>
                                    </table>
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    amountTaxable
                                    <span class="type">integer</span>
                                </div>
                                <div class="desc">
                                    결제 금액 중 과세금액 (복합과세)<br>
                                    <span class="text-muted">해당 값이 없을 경우 0 으로 보내주셔야 합니다. 빈 값의 경우 에러가 발생합니다.</span>
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    amountTaxFree
                                    <span class="type">integer</span>
                                    <span class="required"></span>
                                </div>
                                <div class="desc">
                                    결제 금액 중 비과세금액 (복합과세)<br>
                                    <span class="text-muted">해당 값이 없을 경우 0 으로 보내주셔야 합니다. 빈 값의 경우 에러가 발생합니다.</span>
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    amountVat
                                    <span class="type">integer</span>
                                </div>
                                <div class="desc">
                                    결제 금액 중 부가세 (복합과세)<br>
                                    <span class="text-muted">해당 값이 없을 경우 0 으로 보내주셔야 합니다. 빈 값의 경우 에러가 발생합니다.</span>
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    amountServiceFee
                                    <span class="type">integer</span>
                                </div>
                                <div class="desc">
                                    결제 금액 중 봉사료 (복합과세)<br>
                                    <span class="text-muted">해당 값이 없을 경우 0 으로 보내주셔야 합니다. 빈 값의 경우 에러가 발생합니다.</span>
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    expiredTime
                                    <span class="type">timestamp</span>
                                </div>
                                <div class="desc">
                                    결제 만료 기한 (기본값 15분, 최대 1시간 설정 가능)
                                    <br>형식 : 1970-01-01 00:00:00
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    resultCallback
                                    <span class="type">string</span>
                                    <span class="auto-required"></span>
                                </div>
                                <div class="desc">
                                    결제 결과 callback URL (결제 성공)<br>
                                    <span class="text-muted">토스 서버가 정상 출금 완료 후 이 곳에 입력한 URL로 결과를 전송하기 때문에 가맹점 서버에서 반드시 확인하셔야 합니다.<br>
                                    <font color="red"> callback URL에 80, 443 이외의 port가 포함되면 이용할 수 없으니 유의해주세요.</font>
                                    </span>
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    cashReceipt
                                    <span class="type">boolean</span>
                                    <span class="required"></span>
                                </div>
                                <div class="desc">
                                    현금영수증 발급 가능 여부<br>
                                    <span class="text-muted">현금영수증 기능을 활용하시는 경우 true, 미 사용의 경우 false로 선언해 주시기 바랍니다.
                                    그러나, 기본 값이 true이기 때문에 현금영수증 사용 시 별도로 선언하지 않으셔도 됩니다.</span>
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    userPhone
                                    <span class="type">string</span>
                                </div>
                                <div class="desc">
                                    구매자가 결제 시 이용할 휴대전화번호 지정
                                    <br /> (지정 시 구매자가 번호를 변경할 수 없으므로 전화번호 정보가 정확할 때만 이용하십시오)
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    metadata
                                    <span class="type">string</span>
                                </div>
                                <div class="desc">
                                    결제와 연관된 추가 데이터 (최대 1024자)
                                </div>
                            </div>
                        </div>
                        <div class="info">
                            <h4>response</h4>
                            <div class="field clearfix">
                                <div class="key">
                                    code
                                    <span class="type">integer</span>
                                </div>
                                <div class="desc">
                                    응답코드
                                    <br />
                                    <br />
                                    <table class="table">
                                        <tr>
                                            <td>0</td>
                                            <td>성공</td>
                                        </tr>
                                        <tr>
                                            <td>-1</td>
                                            <td>실패 (실패사유는 msg와 errorCode 제공)</td>
                                        </tr>
                                    </table>
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    checkoutPage
                                    <span class="type">string</span>
                                </div>
                                <div class="desc">
                                    생성된 결제를 진행하는 웹페이지 URL (구매자를 이 URL로 보내야 함)<br>
                                    <span class="text-muted">토스가 전달한 값 그대로 사용하세요.</span>
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    payToken
                                    <span class="type">string</span>
                                </div>
                                <div class="desc">
                                    Toss 결제 토큰
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    msg
                                    <span class="type">string</span>
                                </div>
                                <div class="desc">
                                    응답이 성공이 아닌 경우 설명 메세지
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    errorCode
                                    <span class="type">string</span>
                                </div>
                                <div class="desc">
                                    에러 코드
                                    <br />
                                    <br />
                                    <table class="table">
                                        <tr>
                                            <td>COMMON_PAY_ERROR</td>
                                            <td>시스템 에러가 발생 하였습니다.</td>
                                        </tr>
                                        <tr>
                                            <td>CORE_USER_ERROR</td>
                                            <td>존재하지 않는 사용자 입니다.</td>
                                        </tr>
                                        <tr>
                                            <td>COMMON_TEMP_DENIAL_ERROR</td>
                                            <td>일시적 시스템 에러가 발생하였습니다.</td>
                                        </tr>
                                        <tr>
                                            <td>COMMON_INVALID_PARAMETER</td>
                                            <td>요청한 값이 부족하거나 올바르지 않습니다.</td>
                                        </tr>
                                        <tr>
                                            <td>PAYMENT_UNDER_CONSTRUCTION</td>
                                            <td>동일한 결제가 이미 존재합니다.</td>
                                        </tr>
                                        <tr>
                                            <td>PAYMENT_DUPLICATION_ORDER_NO</td>
                                            <td>중복된 주문번호(orderNo) 가 전달되었습니다.</td>
                                        </tr>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="method-example">
                        <div class="title">Definition</div>
                        <pre><code class="language-bash always-visible">POST https://pay.toss.im/api/v1/payments</code></pre>
                        <div class="title">Example Request</div>
                        <pre><code class="curl language-bash">curl https://pay.toss.im/api/v1/payments \
    -H "Content-Type: application/json" \
    -d '{
        "orderNo":"2015072012211",
        "amount":10000,
        "amountTaxFree":0,
        "productDesc":"테스트결제",
        "apiKey":"sk_test_apikey1234567890",
        "autoExecute":"true",
        "resultCallback":"http://YOUR-SITE.COM/callback",
        "retUrl": "http://YOUR-SITE.COM/ORDER-CHECK?orderno=1",
        "retCancelUrl": "http://YOUR-SITE.COM/close"
        }'</code><code class="java language-java">import java.nio.charset.StandardCharsets;

URL url = null;
URLConnection connection = null;
StringBuilder responseBody = new StringBuilder();
try {
	url = new URL("https://pay.toss.im/api/v1/payments");
	connection = url.openConnection();
	connection.addRequestProperty("Content-Type", "application/json");
	connection.setDoOutput(true);
	connection.setDoInput(true);

	org.json.simple.JSONObject jsonBody = new JSONObject();
	jsonBody.put("orderNo", "2015072012211");
	jsonBody.put("amount", 10000);
	jsonBody.put("amountTaxFree", 0);
	jsonBody.put("productDesc", "테스트 결제");
	jsonBody.put("apiKey", "sk_test_apikey1234567890");
    jsonBody.put("autoExecute", "true");
    jsonBody.put("resultCallback", "http://"http://YOUR-SITE.COM/callback");
    jsonBody.put("retUrl", "http://YOUR-SITE.COM/ORDER-CHECK?orderno=1");
    jsonBody.put("retCancelUrl", "http://YOUR-SITE.COM/close");

	BufferedOutputStream bos = new BufferedOutputStream(connection.getOutputStream());
	<!--bos.write(jsonBody.toJSONString().getBytes());-->
    bos.write(jsonBody.toJSONString().getBytes(StandardCharsets.UTF_8));
	bos.flush();
	bos.close();

	<!--BufferedReader br = new BufferedReader(new InputStreamReader(connection.getInputStream()));-->
    BufferedReader br = new BufferedReader(new InputStreamReader(connection.getInputStream(), StandardCharsets.UTF_8));
	String line = null;
	while ((line = br.readLine()) != null) {
		responseBody.append(line);
	}
	br.close();
} catch (Exception e) {
	responseBody.append(e);
}
System.out.println(responseBody.toString());</code><code class="php language-php">$arrayBody = array();
$arrayBody["orderNo"] = "2015072012211";
$arrayBody["amount"] = 10000;
$arrayBody["amountTaxFree"] = 0;
$arrayBody["productDesc"] = "테스트 결제";
$arrayBody["apiKey"] = "sk_test_apikey1234567890";
$arrayBody["autoExecute"] = "true";
$arrayBody["resultCallback"] = "http://YOUR-SITE.COM/callback";
$arrayBody["retUrl"] = "http://YOUR-SITE.COM/ORDER-CHECK?orderno=1";
$arrayBody["retCancelUrl"] = "http://YOUR-SITE.COM/close";
$jsonBody = json_encode($arrayBody);

$ch = curl_init('https://pay.toss.im/api/v1/payments');
curl_setopt($ch, CURLOPT_CUSTOMREQUEST, "POST");
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ch, CURLOPT_POSTFIELDS, $jsonBody);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_HTTPHEADER, array(
    'Content-Type: application/json',
    'Content-Length: ' . strlen($jsonBody))
);

$result = curl_exec($ch);
curl_close($ch);

echo "Response: ".$result;</code><code class="aspnet language-aspnet">Dim data, httpRequest, postResponse

data = "apiKey=sk_test_apikey1234567890"
data = data & "&orderNo=2015072012211"
data = data & "&amount=10000"
data = data & "&amountTaxFree=0"
data = data & "&productDesc=ASPtestProduct"
data = data & "&autoExecute=true"
data = data & "&resultCallback=http://YOUR-SITE.COM/callback"
data = data & "&retUrl=http://YOUR-SITE.COM/ORDER-CHECK?orderno=1"
data = data & "&retCancelUrl=http://YOUR-SITE.COM/close"

Set httpRequest = Server.CreateObject("MSXML2.ServerXMLHTTP")
httpRequest.Open "POST", "https://pay.toss.im/api/v1/payments", False
httpRequest.SetRequestHeader "Content-Type", "application/x-www-form-urlencoded"
httpRequest.Send data

postResponse = httpRequest.ResponseText

Response.Write postResponse</code><code class="python language-python">import urllib, urllib2

url = "https://pay.toss.im/api/v1/payments"
params = {
    "orderNo": "2015072012211",
    "amount": 10000,
    "amountTaxFree": 0,
    "productDesc":"테스트 결제",
    "apiKey": "sk_test_apikey1234567890",
    "autoExecute": "true",
    "resultCallback": "http://YOUR-SITE.COM/callback",
    "retUrl": "http://YOUR-SITE.COM/ORDER-CHECK?orderno=1",
    "retCancelUrl": "http://YOUR-SITE.COM/close"
}

response = urllib.urlopen(url, urllib.urlencode(params))
print(response.read())</code><code class="ruby language-ruby">require 'net/http'
require 'json'

uri = URI.parse("https://pay.toss.im/api/v1/payments")

params = {
        "orderNo" => "2015072012211",
        "amount"=> 10000,
        "amountTaxFree"=> 0,
        "productDesc" => "테스트 결제",
        "apiKey" => "sk_test_apikey1234567890",
        "autoExecute" => "true",
        "resultCallback" => "http://YOUR-SITE.COM/callback",
        "retUrl": "http://YOUR-SITE.COM/ORDER-CHECK?orderno=1",
        "retCancelUrl": "http://YOUR-SITE.COM/close"
}

http = Net::HTTP.new(uri.host, uri.port)
http.use_ssl = true
request = Net::HTTP::Post.new(uri.path)
request.set_form_data(params)
response = http.request(request)

p JSON.parse(response.body)</code></pre>
                        <div class="title">Example Response</div>
                        <pre><div><code style="border:none;box-shadow:none;" class="language-javascript always-visible">{"code":0,"checkoutPage":"https://pay.toss.im/payfront/auth?payToken=test_token1234567890&retUrl=http://YOUR-SITE.COM","payToken":"test_token1234567890"}
                        </code></div></pre>
                    </div>
                </div>
            </div>
            

            <!--추가-->
            <div class="method" id="resultcallback">
                <div class="method-section clearfix">
                    <div class="method-description">
                        <h4>결제 결과 Callback (resultCallback)</h4>
                        <p>
                            결제 처리가 완료되면 결제 상태가 변경되고, 토스는 가맹점 서버로 변경 사항을 알려드립니다. <br><br>
                            다시 한번 말씀드립니다. <br>
                            ‘결제완료’ callback을 받았을 때, 결제완료 상태를 변경하시고 재고차감 등의 로직을 처리해 주세요.<br>
                            자동 승인 설정을 사용 시 (autoExecute가 true) 필수적으로 활용해야 합니다.
                        </p>
                        <p>
                            * 생성된 결제 건에 resultCallback 파라미터 값이 있을 경우에만 동작합니다.
                        </p>
                        <div class="info">
                            <h4>parameter</h4>
                            <div class="field clearfix">
                                <div class="key">
                                    status
                                    <span class="type">string</span>
                                </div>
                                <div class="desc">
                                    PAY_COMPLETE
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    payToken
                                    <span class="type">string</span>
                                </div>
                                <div class="desc">
                                    Toss 결제 토큰
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    orderNo
                                    <span class="type">timestamp</span>
                                </div>
                                <div class="desc">
                                    결제 처리 시각<br>
                                    형식 : 2019-04-01 00:00:00
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    paidTs
                                    <span class="type">string</span>
                                </div>
                                <div class="desc">
                                    Toss 결제와 이어진 주문번호
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    metadata
                                    <span class="type">string</span>
                                </div>
                                <div class="desc">
                                    결제 생성 시 저장한 연관 정보
                                </div>
                            </div>
                        </div>
                        <h3>HTTP 응답 코드</h3>
                        <div class="info">
                            <h4>HTTP Response Code</h4>
                            <div class="field clearfix">
                                <div class="key">200</div>
                                <div class="desc">
                                    OK : 정상
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">400</div>
                                <div class="desc">
                                    Bad Request : 파라미터 오류
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">401</div>
                                <div class="desc">
                                    Unauthorized : 가맹점 key 오류
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">404</div>
                                <div class="desc">
                                    Not Found : 존재하지 않는 요청
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">50x</div>
                                <div class="desc">
                                    Server error : 서버 오류
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">xxx</div>
                                <div class="desc">
                                    Server error : 기타 등등
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="method-example">
                        <div class="title">Definition</div>
                        <pre><code class="language-bash always-visible">POST http://YOUR-SITE.COM/callback (결제 생성 시 가맹점에서 설정한 callback URL)</code></pre>
                        <div class="title">Example Request</div>
                        <pre><code class="language-bash always-visible">{
 "status": "PAY_COMPLETE",
 "payToken": "test_token1234567890",
 "orderNo": "2015072012211",
 "paidTs": "2019-04-01 00:00:00"
}                            
                        </code></pre>
                    </div>
                </div>
            </div>
            <!--추가 끝-->

            <div class="method" id="execute">
                <div class="method-section clearfix">
                    <div class="method-description">
                        <h3>가맹점 결제 승인</h3>
                        <p>
                            자동 승인 설정을 false로 사용하는 가맹점에서만 처리하는 로직입니다.<br>
                            구매자 인증 완료 상태(PAY_APPROVED)의 결제 건을 가맹점이 주체가 되어 최종 승인하고 결제를 완료 처리합니다.<br>
                            <br> 결제 승인에 관한 자세한 내용은 아래 문서를 참고하세요.
                            <br>
                            <a href="gettingstarted.html#create-9">토스 결제 시작하기 > 결제 승인하기</a><br><br>
                            필수 파라미터는 딱 2가지 입니다. '어느 가맹점'에서 '어떤 결제건'을 최종 승인할지 알려주세요.<br>
                            필요에 따라 결제건의 유효성 검증을 할 수 있습니다.
                        </p>
                        <div class="info">
                            <h4>endpoint</h4>
                            <div class="field clearfix">
                                <div class="key">
                                    (POST)
                                </div>
                                <div class="desc">
                                  https://pay.toss.im/api/v1/execute</br>
                                </div>
                            </div>
                        </div>
                        <div class="info">
                            <h4>parameters</h4>
                            <div class="field clearfix">
                                <div class="key">
                                    apiKey
                                    <span class="type">string</span>
                                    <span class="required"></span>
                                </div>
                                <div class="desc">
                                    가맹점 key<br>
                                    <span class="text-muted">웹 브라우저 혹은 외부에 노출되지 않도록 유의해 주시기 바랍니다.</span>
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    payToken
                                    <span class="type">string</span>
                                    <span class="required"></span>
                                </div>
                                <div class="desc">
                                    토스 결제 토큰 (승인할 결제 건의 토큰값)
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    amount
                                    <span class="type">integer</span>
                                </div>
                                <div class="desc">
                                    결제 금액<br>
                                    <span class="text-muted">결제 승인 시 orderNo와 amount를 함께 보내면 일치 여부를 확인합니다.
                                    payToken과 연결된 결제건과 orderNo나 amount가 다르면 승인 실패처리하여 다시 한번 유효성을 검증합니다.</span>
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    orderNo
                                    <span class="type">string</span>
                                </div>
                                <div class="desc">
                                    가맹점의 상품 주문번호<br>
                                    <span class="text-muted">결제 승인 시 orderNo와 amount를 함께 보내면 일치 여부를 확인합니다.
                                    payToken과 연결된 결제건과 orderNo나 amount가 다르면 승인 실패처리하여 다시 한번 유효성을 검증합니다.</span>
                                </div>
                            </div>
                        </div>
                        <div class="info">
                            <h4>response</h4>
                            <div class="field clearfix">
                                <div class="key">
                                    code
                                    <span class="type">integer</span>
                                </div>
                                <div class="desc">
                                    응답코드
                                    <br />
                                    <br />
                                    <table class="table">
                                        <tr>
                                            <td>0</td>
                                            <td>성공</td>
                                        </tr>
                                        <tr>
                                            <td>-1</td>
                                            <td>실패 (실패사유는 msg와 errorCode로 제공)</td>
                                        </tr>
                                    </table>
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    approvalTime
                                    <span class="type">timestamp</span>
                                </div>
                                <div class="desc">
                                    승인시각 (yyyy-MM-dd HH:mm:ss)
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    amount
                                    <span class="type">integer</span>
                                </div>
                                <div class="desc">
                                    승인한 결제 금액
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    orderNo
                                    <span class="type">string</span>
                                </div>
                                <div class="desc">
                                    승인한 상품 주문번호
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    msg
                                    <span class="type">string</span>
                                </div>
                                <div class="desc">
                                    응답이 성공이 아닌 경우 설명 메세지
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    errorCode
                                    <span class="type">string</span>
                                </div>
                                <div class="desc">
                                    에러 코드
                                    <br />
                                    <br />
                                    <table class="table">
                                        <tr>
                                            <td>PAY_EXPIRED</td>
                                            <td>결제 기한이 만료되었습니다.</td>
                                        </tr>
                                        <tr>
                                            <td>COMMON_TIMEOUT</td>
                                            <td>출금 타임 아웃이 발생하였습니다.</td>
                                        </tr>
                                        <tr>
                                            <td>PAY_UNAUTHORIZED</td>
                                            <td>본인의 결제가 아닙니다.</td>
                                        </tr>
                                        <tr>
                                            <td>COMMON_EXCEED_LIMIT</td>
                                            <td>결제한도를 초과 하였습니다.</td>
                                        </tr>
                                        <tr>
                                            <td>PAY_ALREADY_COMPLETED</td>
                                            <td>이미 완료된 결제입니다.</td>
                                        </tr>
                                        <tr>
                                            <td>PAY_ITS_NOT_ABLE_TO_PAY</td>
                                            <td>결제를 진행 할 수 없는 상태 입니다.</td>
                                        </tr>
                                        <tr>
                                            <td>COMMON_NOT_ENOUGH_CASH</td>
                                            <td>잔고가 부족합니다.</td>
                                        </tr>
                                        <tr>
                                            <td>EXECUTE_PAY_NOT_APPROVED</td>
                                            <td>승인 되지 않은 결제 입니다.</td>
                                        </tr>
                                        <tr>
                                            <td>COMMON_SIGN_FAILED_CS_CALL</td>
                                            <td>전자서명에 실패 하였습니다.</td>
                                        </tr>
                                        <tr>
                                            <td>COMMON_BREAK_TIME_OF_BANK</td>
                                            <td>은행 점검시간 입니다.</td>
                                        </tr>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="method-example">
                        <div class="title">Definition</div>
                        <pre><code class="language-bash always-visible">POST https://pay.toss.im/api/v1/execute</code></pre>
                        <div class="title">Example Request</div>
                        <pre><code class="curl language-bash">curl "https://pay.toss.im/api/v1/execute" \
    -H "Content-Type: application/json" \
    -d '{
        "payToken":"test_token1234567890",
        "apiKey":"sk_test_apikey1234567890"
        }'</code><code class="java language-java">import java.nio.charset.StandardCharsets;

URL url = null;
URLConnection connection = null;
StringBuilder responseBody = new StringBuilder();
try {
	url = new URL("https://pay.toss.im/api/v1/execute");
	connection = url.openConnection();
	connection.addRequestProperty("Content-Type", "application/json");
	connection.setDoOutput(true);
	connection.setDoInput(true);

	org.json.simple.JSONObject jsonBody = new JSONObject();
	jsonBody.put("payToken", "test_token1234567890");
	jsonBody.put("apiKey", "sk_test_apikey1234567890");

	BufferedOutputStream bos = new BufferedOutputStream(connection.getOutputStream());
	<!--bos.write(jsonBody.toJSONString().getBytes());-->
    bos.write(jsonBody.toJSONString().getBytes(StandardCharsets.UTF_8));
	bos.flush();
	bos.close();

	<!--BufferedReader br = new BufferedReader(new InputStreamReader(connection.getInputStream()));-->
    BufferedReader br = new BufferedReader(new InputStreamReader(connection.getInputStream(), StandardCharsets.UTF_8));
	String line = null;
	while ((line = br.readLine()) != null) {
		responseBody.append(line);
	}
	br.close();
} catch (Exception e) {
	responseBody.append(e);
}
System.out.println(responseBody.toString());</code><code class="php language-php">$arrayBody = array();
$arrayBody["payToken"] = "test_token1234567890";
$arrayBody["apiKey"] = "sk_test_apikey1234567890";
$jsonBody = json_encode($arrayBody);

$ch = curl_init('https://pay.toss.im/api/v1/execute');
curl_setopt($ch, CURLOPT_CUSTOMREQUEST, "POST");
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ch, CURLOPT_POSTFIELDS, $jsonBody);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_HTTPHEADER, array(
    'Content-Type: application/json',
    'Content-Length: ' . strlen($jsonBody))
);

$result = curl_exec($ch);
curl_close($ch);

echo "Response: ".$result;</code><code class="aspnet language-aspnet">Dim data, httpRequest, postResponse

data = "apiKey=sk_test_apikey1234567890"
data = data & "&payToken=test_token1234567890"

Set httpRequest = Server.CreateObject("MSXML2.ServerXMLHTTP")
httpRequest.Open "POST", "https://pay.toss.im/api/v1/execute", False
httpRequest.SetRequestHeader "Content-Type", "application/x-www-form-urlencoded"
httpRequest.Send data

postResponse = httpRequest.ResponseText

Response.Write postResponse</code><code class="python language-python">import urllib, urllib2

url = "https://pay.toss.im/api/v1/execute"
params = {
    "payToken": "test_token1234567890",
    "apiKey": "sk_test_apikey1234567890"
}

response = urllib.urlopen(url, urllib.urlencode(params))
print(response.read())</code><code class="ruby language-ruby">require 'net/http'
require 'json'

uri = URI.parse("https://pay.toss.im/api/v1/execute")

params = {
        "payToken" => "test_token1234567890",
        "apiKey" => "sk_test_apikey1234567890"
}

http = Net::HTTP.new(uri.host, uri.port)
http.use_ssl = true
request = Net::HTTP::Post.new(uri.path)
request.set_form_data(params)
response = http.request(request)

p JSON.parse(response.body)</code></pre>
                        <div class="title">Example Response</div>
                        <pre><code class="language-javascript always-visible">
{"code":0,"approvalTime":"2016-11-16 13:59:59"}</code>
            </pre>
                    </div>
                </div>
            </div>
            <div class="method" id="cancel">
                <div class="method-section clearfix">
                    <div class="method-description">
                        <h3>결제 취소</h3>
                        <p>
                            결제 대기 중인 결제 건을 취소합니다. (결제가 완료되어 구매자의 계좌에서 출금된 상태에서는 취소할 수 없으며 <a href="#refunds">환불</a> 처리해야 합니다)
                        </p>
                        <div class="info">
                            <h4>endpoint</h4>
                            <div class="field clearfix">
                                <div class="key">
                                    (POST)
                                </div>
                                <div class="desc">
                                  https://pay.toss.im/api/v1/cancel </br>
                                </div>
                            </div>
                        </div>
                        <div class="info">
                            <h4>parameters</h4>
                            <div class="field clearfix">
                                <div class="key">
                                    apiKey
                                    <span class="type">string</span>
                                    <span class="required"></span>
                                </div>
                                <div class="desc">
                                    가맹점 key<br>
                                    <span class="text-muted">웹 브라우저 혹은 외부에 노출되지 않도록 유의해 주시기 바랍니다.</span>
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    payToken
                                    <span class="type">string</span>
                                    <span class="required"></span>
                                </div>
                                <div class="desc">
                                    Toss 결제 토큰
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    reason
                                    <span class="type">string</span>
                                </div>
                                <div class="desc">
                                    취소 사유 (최대 50자)
                                </div>
                            </div>
                        </div>
                        <div class="info">
                            <h4>response</h4>
                            <div class="field clearfix">
                                <div class="key">
                                    code
                                    <span class="type">integer</span>
                                </div>
                                <div class="desc">
                                    응답코드
                                    <br />
                                    <br />
                                    <table class="table">
                                        <tr>
                                            <td>0</td>
                                            <td>성공</td>
                                        </tr>
                                        <tr>
                                            <td>-1</td>
                                            <td>실패 (실패사유는 msg와 errorCode로 제공)</td>
                                        </tr>
                                    </table>
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    msg
                                    <span class="type">string</span>
                                </div>
                                <div class="desc">
                                    응답이 성공이 아닌 경우 설명 메세지
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    errorCode
                                    <span class="type">string</span>
                                </div>
                                <div class="desc">
                                    에러 코드
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="method-example">
                        <div class="title">Definition</div>
                        <pre><code class="language-bash always-visible">POST https://pay.toss.im/api/v1/cancel</code></pre>
                        <div class="title">Example Request</div>
                        <pre><code class="curl language-bash">curl "https://pay.toss.im/api/v1/cancel" \
    -H "Content-Type: application/json" \
    -d '{
        "payToken":"test_token1234567890",
        "apiKey":"sk_test_apikey1234567890"
        }'</code><code class="java language-java">import java.nio.charset.StandardCharsets;

URL url = null;
URLConnection connection = null;
StringBuilder responseBody = new StringBuilder();
try {
	url = new URL("https://pay.toss.im/api/v1/cancel");
	connection = url.openConnection();
	connection.addRequestProperty("Content-Type", "application/json");
	connection.setDoOutput(true);
	connection.setDoInput(true);

	org.json.simple.JSONObject jsonBody = new JSONObject();
	jsonBody.put("payToken", "test_token1234567890");
	jsonBody.put("reason", "재고 부족");
	jsonBody.put("apiKey", "sk_test_apikey1234567890");

	BufferedOutputStream bos = new BufferedOutputStream(connection.getOutputStream());
	<!--bos.write(jsonBody.toJSONString().getBytes());-->
    bos.write(jsonBody.toJSONString().getBytes(StandardCharsets.UTF_8));
	bos.flush();
	bos.close();

	<!--BufferedReader br = new BufferedReader(new InputStreamReader(connection.getInputStream()));-->
    BufferedReader br = new BufferedReader(new InputStreamReader(connection.getInputStream(), StandardCharsets.UTF_8));
	String line = null;
	while ((line = br.readLine()) != null) {
		responseBody.append(line);
	}
	br.close();
} catch (Exception e) {
	responseBody.append(e);
}
System.out.println(responseBody.toString());</code><code class="php language-php">$arrayBody = array();
$arrayBody["payToken"] = "test_token1234567890";
$arrayBody["reason"] = "재고 부족";
$arrayBody["apiKey"] = "sk_test_apikey1234567890";
$jsonBody = json_encode($arrayBody);

$ch = curl_init('https://pay.toss.im/api/v1/cancel');
curl_setopt($ch, CURLOPT_CUSTOMREQUEST, "POST");
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ch, CURLOPT_POSTFIELDS, $jsonBody);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_HTTPHEADER, array(
    'Content-Type: application/json',
    'Content-Length: ' . strlen($jsonBody))
);

$result = curl_exec($ch);
curl_close($ch);

echo "Response: ".$result;</code><code class="aspnet language-aspnet">Dim data, httpRequest, postResponse
​
data = "apiKey=sk_test_apikey1234567890"
data = data & "&payToken=test_token1234567890"
data = data & "&reason=SoldOut"
​
Set httpRequest = Server.CreateObject("MSXML2.ServerXMLHTTP")
httpRequest.Open "POST", "https://pay.toss.im/api/v1/cancel", False
httpRequest.SetRequestHeader "Content-Type", "application/x-www-form-urlencoded"
httpRequest.Send data
​
postResponse = httpRequest.ResponseText
​
Response.Write postResponse
</code><code class="python language-python">import urllib, urllib2

url = "https://pay.toss.im/api/v1/cancel"
params = {
    "payToken": "test_token1234567890",
    "reason":"재고 부족",
    "apiKey": "sk_test_apikey1234567890"
}

response = urllib.urlopen(url, urllib.urlencode(params))
print(response.read())</code><code class="ruby language-ruby">require 'net/http'
require 'json'

uri = URI.parse("https://pay.toss.im/api/v1/cancel")

params = {
        "payToken" => "test_token1234567890",
        "reason" => "재고 부족",
        "apiKey" => "sk_test_apikey1234567890"
}

http = Net::HTTP.new(uri.host, uri.port)
http.use_ssl = true
request = Net::HTTP::Post.new(uri.path)
request.set_form_data(params)
response = http.request(request)

p JSON.parse(response.body)</code></pre>
                        <div class="title">Example Response</div>
                        <pre><code class="language-javascript always-visible">{"code":0}</code>
            </pre>
                    </div>

                </div>
            </div>
            <div class="method" id="refunds">
                <div class="method-section clearfix">
                    <div class="method-description">
                        <h3>결제 환불</h3>
                        <p>
                            결제 완료 건의 결제 금액 중 일부 또는 전부를 구매자에게 돌려줍니다.
                        </p>
                        <div class="info">
                            <h4>endpoint</h4>
                            <div class="field clearfix">
                                <div class="key">
                                    (POST)
                                </div>
                                <div class="desc">
                                  https://pay.toss.im/api/v1/refunds </br>
                                </div>
                            </div>
                        </div>
                        <div class="info">
                            <h4>parameters</h4>
                            <div class="field clearfix">
                                <div class="key">
                                    apiKey
                                    <span class="type">string</span>
                                    <span class="required"></span>
                                </div>
                                <div class="desc">
                                    가맹점 key<br>
                                    <span class="text-muted">웹 브라우저 혹은 외부에 노출되지 않도록 유의해 주시기 바랍니다.</span>
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    payToken
                                    <span class="type">string</span>
                                    <span class="required"></span>
                                </div>
                                <div class="desc">
                                    토스 결제 토큰
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    refundNo
                                    <span class="type">string</span>
                                </div>
                                <div class="desc">
                                    환불 번호
                                    <br />
                                    <span class="text-muted">환불 상태 확인 시 필요. 미입력 시 자동 생성되며 환불 완료 응답에서 확인 가능</span>
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    reason
                                    <span class="type">string</span>
                                </div>
                                <div class="desc">
                                    환불 사유 (최대 50자)
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    amount
                                    <span class="type">integer</span>
                                    <span class="required"></span>
                                </div>
                                <div class="desc">
                                    환불할 금액
                                    <br />
                                    <span class="text-muted">미입력시 환불할 결제건의 남은 전액을 환불 처리</span>
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    amountTaxable
                                    <span class="type">integer</span>
                                </div>
                                <div class="desc">
                                    환불할 금액 중 과세금액
                                    <br />
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    amountTaxFree
                                    <span class="type">integer</span>
                                    <span class="required"></span>
                                </div>
                                <div class="desc">
                                    환불할 금액 중 비과세금액
                                    <br />
                                    <span class="text-muted">환불할 금액중 비과세 금액, 없으면 0으로 설정</span>
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    amountVat
                                    <span class="type">integer</span>
                                </div>
                                <div class="desc">
                                    환불할 금액 중 부가세
                                    <br />
                                    <span class="text-muted">값이 없으면 환불할 과세금액을 11로 나눈 후 소수점 첫째 자리에서 올림</span>
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    amountServiceFee
                                    <span class="type">integer</span>
                                </div>
                                <div class="desc">
                                    환불할 금액 중 봉사료
                                    <br />
                                    <span class="text-muted">결제 생성 시 봉사료 설정한 경우에만 입력 가능</span>
                                </div>
                            </div>
                        </div>
                        <div class="info">
                            <h4>response</h4>
                            <div class="field clearfix">
                                <div class="key">
                                    code
                                    <span class="type">integer</span>
                                </div>
                                <div class="desc">
                                    응답코드
                                    <br />
                                    <br />
                                    <table class="table">
                                        <tr>
                                            <td>0</td>
                                            <td>성공</td>
                                        </tr>
                                        <tr>
                                            <td>-1</td>
                                            <td>실패 (실패사유는 msg와 errorCode로 제공)</td>
                                        </tr>
                                    </table>
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    refundNo
                                    <span class="type">string</span>
                                </div>
                                <div class="desc">
                                    환불 번호
                                    <br />
                                    <span class="text-muted">환불 상태 확인 시 필요</span>
                                </div>
                            </div>
                                <div class="field clearfix">
                                <div class="key">
                                    refundableAmount
                                    <span class="type">integer</span>
                                </div>
                                <div class="desc">
                                    환불 가능 금액
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    approvalTime
                                    <span class="type">timestamp</span>
                                </div>
                                <div class="desc">
                                    승인시각 (yyyy-MM-dd HH:mm:ss)
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    msg
                                    <span class="type">string</span>
                                </div>
                                <div class="desc">
                                    응답이 성공이 아닌 경우 설명 메세지
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    errorCode
                                    <span class="type">string</span>
                                </div>
                                <div class="desc">
                                    에러 코드
                                    <br />
                                    <br />
                                    <table class="table">
                                        <tr>
                                            <td>INACTIVE_USER</td>
                                            <td>계정이 비활성화/삭제된 사용자의 결제.</td>
                                        </tr>
                                        <tr>
                                            <td>COMMON_REFUND_ERROR</td>
                                            <td>이미 환불된 결제, 환불 가능 기간 180일이 지난 결제.</td>
                                        </tr>
                                        <tr>
                                            <td>REFUND_EXCEED_DAILY</td>
                                            <td>환불 금액이 상점의 일 환불 한도보다 클수 없습니다.</td>
                                        </tr>
                                        <tr>
                                            <td>REFUND_EXCEED_AMOUNT</td>
                                            <td>환불금액이 결제금액보다 더 클수 없습니다.</td>
                                        </tr>
                                        <tr>
                                            <td>REFUND_PENDING_SUCCESS</td>
                                            <td>점검이 끝난 후 자동으로 환불이 될 예정입니다. 잠시만 기다려주세요.</td>
                                        </tr>
                                        <tr>
                                            <td>REFUND_NO_TAXFREE_ON_COMPLEX_TAX</td>
                                            <td>과세정보가 올바르지 않습니다.</td>
                                        </tr>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="method-example">
                        <div class="title">Definition</div>
                        <pre><code class="language-bash always-visible">POST https://pay.toss.im/api/v1/refunds</code></pre>
                        <div class="title">Example Request</div>
                        <pre><code class="curl language-bash">curl "https://pay.toss.im/api/v1/refunds" \
    -H "Content-Type: application/json" \
    -d '{
        "payToken":"test_token1234567890",
        "apiKey":"sk_test_apikey1234567890"
        }'</code><code class="java language-java">import java.nio.charset.StandardCharsets;

URL url = null;
URLConnection connection = null;
StringBuilder responseBody = new StringBuilder();
try {
	url = new URL("https://pay.toss.im/api/v1/refunds");
	connection = url.openConnection();
	connection.addRequestProperty("Content-Type", "application/json");
	connection.setDoOutput(true);
	connection.setDoInput(true);

	org.json.simple.JSONObject jsonBody = new JSONObject();
	jsonBody.put("payToken", "test_token1234567890");
	jsonBody.put("amount", "5000");
	jsonBody.put("apiKey", "sk_test_apikey1234567890");

	BufferedOutputStream bos = new BufferedOutputStream(connection.getOutputStream());
	<!--bos.write(jsonBody.toJSONString().getBytes());-->
    bos.write(jsonBody.toJSONString().getBytes(StandardCharsets.UTF_8));
	bos.flush();
	bos.close();

	<!--BufferedReader br = new BufferedReader(new InputStreamReader(connection.getInputStream()));-->
    BufferedReader br = new BufferedReader(new InputStreamReader(connection.getInputStream(), StandardCharsets.UTF_8));
	String line = null;
	while ((line = br.readLine()) != null) {
		responseBody.append(line);
	}
	br.close();
} catch (Exception e) {
	responseBody.append(e);
}
System.out.println(responseBody.toString());</code><code class="php language-php">$arrayBody = array();
$arrayBody["payToken"] = "test_token1234567890";
$arrayBody["amount"] = 5000;
$arrayBody["apiKey"] = "sk_test_apikey1234567890";
$jsonBody = json_encode($arrayBody);

$ch = curl_init('https://pay.toss.im/api/v1/refunds');
curl_setopt($ch, CURLOPT_CUSTOMREQUEST, "POST");
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ch, CURLOPT_POSTFIELDS, $jsonBody);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_HTTPHEADER, array(
    'Content-Type: application/json',
    'Content-Length: ' . strlen($jsonBody))
);

$result = curl_exec($ch);
curl_close($ch);

echo "Response: ".$result;</code><code class="aspnet language-aspnet">Dim data, httpRequest, postResponse

data = "apiKey=sk_test_apikey1234567890"
data = data & "&payToken=test_token1234567890"
data = data & "&amount=1000"

Set httpRequest = Server.CreateObject("MSXML2.ServerXMLHTTP")
httpRequest.Open "POST", "https://pay.toss.im/api/v1/refunds", False
httpRequest.SetRequestHeader "Content-Type", "application/x-www-form-urlencoded"
httpRequest.Send data

postResponse = httpRequest.ResponseText

Response.Write postResponse</code><code class="python language-python">import urllib, urllib2

url = "https://pay.toss.im/api/v1/refunds"
params = {
    "payToken": "test_token1234567890",
    "amount": 5000,
    "apiKey": "sk_test_apikey1234567890"
}

response = urllib.urlopen(url, urllib.urlencode(params))
print(response.read())</code><code class="ruby language-ruby">require 'net/http'
require 'json'

uri = URI.parse("https://pay.toss.im/api/v1/refunds")

params = {
        "payToken" => "test_token1234567890",
        "amount"=> 5000,
        "apiKey" => "sk_test_apikey1234567890"
}

http = Net::HTTP.new(uri.host, uri.port)
http.use_ssl = true
request = Net::HTTP::Post.new(uri.path)
request.set_form_data(params)
response = http.request(request)

p JSON.parse(response.body)</code></pre>
                        <div class="title">Example Response</div>
                        <pre><code class="language-javascript always-visible">{"code":0,"refundNo":"cc92a9ef-8a81-2938-dda9-ff8a78ae29b8","approvalTime":"2016-11-16 13:59:59"}</code>
            </pre>
                    </div>
                </div>
            </div>
            <div class="method" id="status">
                <div class="method-section clearfix">
                    <div class="method-description">
                        <h3>결제 상태 확인</h3>
                        <p>
                            생성된 결제의 현재 상태를 조회합니다.
                        </p>
                        <div class="info">
                            <h4>endpoint</h4>
                            <div class="field clearfix">
                                <div class="key">
                                    (POST)
                                </div>
                                <div class="desc">
                                  https://pay.toss.im/api/v1/status </br>
                                </div>
                            </div>
                        </div>
                        <div class="info">
                            <h4>parameters</h4>
                            <div class="field clearfix">
                                <div class="key">
                                    apiKey
                                    <span class="type">string</span>
                                    <span class="required"></span>
                                </div>
                                <div class="desc">
                                    가맹점 key<br>
                                    <span class="text-muted">웹 브라우저 혹은 외부에 노출되지 않도록 유의해 주시기 바랍니다.</span>
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    payToken 또는 orderNo
                                    <span class="type">string</span>
                                    <span class="required"></span>
                                </div>
                                <div class="desc">
                                    토스 결제 토큰 또는 가맹점 주문번호 (payToken의 우선순위 높음)
                                </div>
                            </div>
                        </div>
                        <div class="info">
                            <h4>response</h4>
                            <div class="field clearfix">
                                <div class="key">
                                    code
                                    <span class="type">integer</span>
                                </div>
                                <div class="desc">
                                    응답코드
                                    <br />
                                    <br />
                                    <table class="table">
                                        <tr>
                                            <td>0</td>
                                            <td>성공</td>
                                        </tr>
                                        <tr>
                                            <td>-1</td>
                                            <td>실패 (실패사유는 msg와 errorCode로 제공)</td>
                                        </tr>
                                    </table>
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    payToken
                                    <span class="type">string</span>
                                </div>
                                <div class="desc">
                                    토스 결제 토큰
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    payStatus
                                    <span class="type">string</span>
                                </div>
                                <div class="desc">
                                    결제 상태
                                    <br />
                                    <br />
                                    <table class="table">
                                        <tr>
                                            <td>PAY_STANDBY</td>
                                            <td>결제 대기 중</td>
                                        </tr>
                                        <tr>
                                            <td>PAY_APPROVED</td>
                                            <td>구매자 인증 완료</td>
                                        </tr>
                                        <tr>
                                            <td>PAY_CANCEL</td>
                                            <td>결제 취소</td>
                                        </tr>
                                        <tr>
                                            <td>PAY_PROGRESS</td>
                                            <td>결제 진행 중</td>
                                        </tr>
                                        <tr>
                                            <td>PAY_COMPLETE</td>
                                            <td>결제 완료</td>
                                        </tr>
                                        <tr>
                                            <td>REFUND_PROGRESS</td>
                                            <td>환불 진행 중</td>
                                        </tr>
                                        <tr>
                                            <td>REFUND_SUCCESS</td>
                                            <td>환불 성공</td>
                                        </tr>
                                        <tr>
                                            <td>SETTLEMENT_COMPLETE</td>
                                            <td>정산 완료</td>
                                        </tr>
                                        <tr>
                                            <td>SETTLEMENT_REFUND_COMPLETE</td>
                                            <td>환불 정산 완료</td>
                                        </tr>
                                    </table>
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    orderNo
                                    <span class="type">string</span>
                                </div>
                                <div class="desc">
                                    토스 결제와 이어진 주문번호
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    amount
                                    <span class="type">integer</span>
                                </div>
                                <div class="desc">
                                    결제 금액
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    amountTaxable
                                    <span class="type">integer</span>
                                </div>
                                <div class="desc">
                                    결제 금액 중 과세금액 (복합과세)
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    amountTaxFree
                                    <span class="type">integer</span>
                                </div>
                                <div class="desc">
                                    결제 금액 중 비과세금액 (복합과세)
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    amountVat
                                    <span class="type">integer</span>
                                </div>
                                <div class="desc">
                                    결제 금액 중 부가세 (복합과세)
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    amountServiceFee
                                    <span class="type">integer</span>
                                </div>
                                <div class="desc">
                                    결제 금액 중 봉사료 (복합과세)
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    timeCreated
                                    <span class="type">timestamp</span>
                                </div>
                                <div class="desc">
                                    결제 생성 시각
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    timePayComplete
                                    <span class="type">timestamp</span>
                                </div>
                                <div class="desc">
                                    결제 완료 시각
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    timePayCancel
                                    <span class="type">timestamp</span>
                                </div>
                                <div class="desc">
                                    결제 취소 시각
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    productDesc
                                    <span class="type">string</span>
                                </div>
                                <div class="desc">
                                    상품 설명
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    hasOwner
                                    <span class="type">boolean</span>
                                </div>
                                <div class="desc">
                                    구매자의 결제 정보 입력 여부
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    availableActions
                                    <span class="type">list</span>
                                </div>
                                <div class="desc">
                                    가능한 액션 목록
                                    <br />
                                    <br />
                                    <table class="table">
                                        <tr>
                                            <td>CANCEL</td>
                                            <td>결제 취소</td>
                                        </tr>
                                        <tr>
                                            <td>REFUND</td>
                                            <td>결제 환불</td>
                                        </tr>
                                    </table>
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    refunds
                                    <span class="type">list</span>
                                </div>
                                <div class="desc">
                                    조회한 결제건에 대한 환불 요청 및 결과
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    timeRefundSuccess
                                    <span class="type">timestamp</span>
                                </div>
                                <div class="desc">
                                    환불 완료 시각
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    metadata
                                    <span class="type">string</span>
                                </div>
                                <div class="desc">
                                    결제와 연관된 추가 데이터
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    msg
                                    <span class="type">string</span>
                                </div>
                                <div class="desc">
                                    응답이 성공이 아닌 경우 설명 메세지
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    errorCode
                                    <span class="type">string</span>
                                </div>
                                <div class="desc">
                                    에러 코드
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    payMethod
                                    <span class="type">string</span>
                                </div>
                                <div class="desc">
                                    결제 수단<br>
                                    <span class="text-muted">토스머니(TOSS_MONEY) 혹은 토스카드(CARD)</span>
                                </div>
                            </div>   
                        </div>
                    </div>
                    <div class="method-example">
                        <div class="title">Definition</div>
                        <pre><code class="language-bash always-visible">POST https://pay.toss.im/api/v1/status</code></pre>
                        <div class="title">Example Request</div>
                        <pre><code class="curl language-bash">curl "https://pay.toss.im/api/v1/status" \
    -H "Content-Type: application/json" \
    -d '{
        "payToken":"test_token1234567890",
        "apiKey":"sk_test_apikey1234567890"
        }'</code><code class="java language-java">import java.nio.charset.StandardCharsets;

URL url = null;
URLConnection connection = null;
StringBuilder responseBody = new StringBuilder();
try {
	url = new URL("https://pay.toss.im/api/v1/status");
	connection = url.openConnection();
	connection.addRequestProperty("Content-Type", "application/json");
	connection.setDoOutput(true);
	connection.setDoInput(true);

	org.json.simple.JSONObject jsonBody = new JSONObject();
	jsonBody.put("orderNo", "2015072012211");
	jsonBody.put("apiKey", "sk_test_apikey1234567890");

	BufferedOutputStream bos = new BufferedOutputStream(connection.getOutputStream());
	<!--bos.write(jsonBody.toJSONString().getBytes());-->
    bos.write(jsonBody.toJSONString().getBytes(StandardCharsets.UTF_8));
	bos.flush();
	bos.close();

	<!--BufferedReader br = new BufferedReader(new InputStreamReader(connection.getInputStream()));-->
    BufferedReader br = new BufferedReader(new InputStreamReader(connection.getInputStream(), StandardCharsets.UTF_8));
	String line = null;
	while ((line = br.readLine()) != null) {
		responseBody.append(line);
	}
	br.close();
} catch (Exception e) {
	responseBody.append(e);
}
System.out.println(responseBody.toString());</code><code class="php language-php">$arrayBody = array();
$arrayBody["orderNo"] = "2015072012211";
$arrayBody["apiKey"] = "sk_test_apikey1234567890";
$jsonBody = json_encode($arrayBody);
// echo "Request: ".$request."<br>";
$ch = curl_init('https://pay.toss.im/api/v1/status');
curl_setopt($ch, CURLOPT_CUSTOMREQUEST, "POST");
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ch, CURLOPT_POSTFIELDS, $jsonBody);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_HTTPHEADER, array(
    'Content-Type: application/json',
    'Content-Length: ' . strlen($jsonBody))
);

$result = curl_exec($ch);
curl_close($ch);

echo "Response: ".$result;</code><code class="aspnet language-aspnet">Dim data, httpRequest, postResponse

data = "apiKey=sk_test_apikey1234567890"
data = data & "&orderNo=2015072012211"

Set httpRequest = Server.CreateObject("MSXML2.ServerXMLHTTP")
httpRequest.Open "POST", "https://pay.toss.im/api/v1/status", False
httpRequest.SetRequestHeader "Content-Type", "application/x-www-form-urlencoded"
httpRequest.Send data

postResponse = httpRequest.ResponseText

Response.Write postResponse</code><code class="python language-python">import urllib, urllib2

url = "https://pay.toss.im/api/v1/status"
params = {
    "orderNo": "2015072012211",
    "apiKey": "sk_test_apikey1234567890"
}

response = urllib.urlopen(url, urllib.urlencode(params))
print(response.read())</code><code class="ruby language-ruby">require 'net/http'
require 'json'

uri = URI.parse("https://pay.toss.im/api/v1/status")

params = {
        "orderNo" => "2015072012211",
        "apiKey" => "sk_test_apikey1234567890"
}

http = Net::HTTP.new(uri.host, uri.port)
http.use_ssl = true
request = Net::HTTP::Post.new(uri.path)
request.set_form_data(params)
response = http.request(request)

p JSON.parse(response.body)</code></pre>
                        <div class="title">Example Response</div>
                        <pre><code class="language-javascript always-visible">{
    "payToken": "test_token1234567890",
    "payStatus": "REFUND_SUCCESS",
    "orderNo": "2015072012211",
    "amount":11000,
    "amountTaxable":10000,
    "amountTaxFree":0,
    "amountVat":1000,
    "amountServiceFee":0,
    "timeCreated":"2017-02-15 11:59:48",
	"timePayComplete":"2017-02-15 12:01:19",
	"timePayCancel":"",
    "productDesc":"테스트 상품",
    "hasOwner": true,
    "availableActions": [
    "REFUND"
    ],
    "refunds": [
        {
        "reason": "일부 상품 환불",
        "amount": 100,
        "refundNo": "7161b8e3-4b79-49d7-ab3c-3ae898aa073b",
        "timeRefundSuccess": "2017-02-15 16:12:40",
        "status": "SUCCESS"
        },
        {
        "reason": "일부 상품 환불",
        "amount": 200,
        "refundNo": "a636fe94-4e1e-41c8-90d9-b17180bdaf04",
        "timeRefundSuccess": "2017-02-15 16:12:43",
        "status": "SUCCESS"
        },
        {
        "reason": "일부 상품 환불",
        "amount": 500,
        "refundNo": "cc92a9ef-8a81-2938-dda9-ff8a78ae29b8",
        "timeRefundSuccess": "2017-02-15 16:12:46",
        "status": "SUCCESS"
        }
    ],
    "code": 0,
    "status": 200,
    "metadata": "metadata"
}</code>
            </pre>
                    </div>
                </div>
            </div>
            <div class="method" id="refundStatus">
                <div class="method-section clearfix">
                    <div class="method-description">
                        <h3>환불 상태 확인</h3>
                        <p>
                            요청하신 환불 건의 현재 상태를 조회합니다. (요청 건별 조회)
                        </p>
                        <div class="info">
                            <h4>endpoint</h4>
                            <div class="field clearfix">
                                <div class="key">
                                    (GET)
                                </div>
                                <div class="desc">
                                  https://pay.toss.im/api/v1/refunds/{refundNo} </br>
                                </div>
                            </div>
                        </div>
                        <div class="info">
                            <h4>parameters</h4>
                            <div class="field clearfix">
                                <div class="key">
                                    apiKey
                                    <span class="type">string</span>
                                    <span class="required"></span>
                                </div>
                                <div class="desc">
                                    가맹점 key<br>
                                    <span class="text-muted">웹 브라우저 혹은 외부에 노출되지 않도록 유의해 주시기 바랍니다.</span>
                                </div>
                            </div>
                        </div>
                        <div class="info">
                            <h4>response</h4>
                            <div class="field clearfix">
                                <div class="key">
                                    code
                                    <span class="type">integer</span>
                                </div>
                                <div class="desc">
                                    응답코드
                                    <br />
                                    <br />
                                    <table class="table">
                                        <tr>
                                            <td>0</td>
                                            <td>성공</td>
                                        </tr>
                                        <tr>
                                            <td>-1</td>
                                            <td>실패 (실패사유는 msg와 errorCode로 제공)</td>
                                        </tr>
                                    </table>
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    refund
                                    <span class="type">list</span>
                                </div>
                                <div class="desc">
                                    환불 번호와 금액, 상태, 사유
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    msg
                                    <span class="type">string</span>
                                </div>
                                <div class="desc">
                                    응답이 성공이 아닌 경우 설명 메세지
                                </div>
                            </div>
                            <div class="field clearfix">
                                <div class="key">
                                    errorCode
                                    <span class="type">string</span>
                                </div>
                                <div class="desc">
                                    에러 코드
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="method-example">
                        <div class="title">Definition</div>
                        <pre><code class="language-bash always-visible">GET https://pay.toss.im/api/v1/refunds/{refundNo}</code></pre>
                        <div class="title">Example Request</div>
                        <pre><code class="curl language-bash">curl -X GET \
  'https://pay.toss.im/api/v1/refunds/f0fe4083-fe1b-44e5-ba04-4390bc19bc5e?apiKey=sk_test_apikey1234567890' \
  -H 'content-type: application/json'</code><code class="java language-java">OkHttpClient client = new OkHttpClient();

MediaType mediaType = MediaType.parse("application/json");
RequestBody body = RequestBody.create(mediaType, "{\n    \"apiKey\":\"sk_test_LY5kmjV2l7LY5kmjV2l7\"\n}");
Request request = new Request.Builder()
  .url("https://pay.toss.im/api/v1/refunds/f0fe4083-fe1b-44e5-ba04-4390bc19bc5e?apiKey=sk_test_apikey1234567890")
  .get()
  .addHeader("content-type", "application/json")
  .build();

Response response = client.newCall(request).execute();</code><code class="php language-php">$request = new HttpRequest();
$request->setUrl('https://pay.toss.im/api/v1/refunds/f0fe4083-fe1b-44e5-ba04-4390bc19bc5e');
$request->setMethod(HTTP_METH_GET);

$request->setQueryData(array(
  'apiKey' => 'sk_test_apikey1234567890'
));

$request->setHeaders(array(
  'content-type' => 'application/json'
));

$request->setBody('{
    "apiKey":"sk_test_LY5kmjV2l7LY5kmjV2l7"
}');

try {
  $response = $request->send();

  echo $response->getBody();
} catch (HttpException $ex) {
  echo $ex;
}</code><code class="aspnet language-aspnet"></code><code class="python language-python">import http.client

conn = http.client.HTTPSConnection("pay.toss.im")

payload = "{\n    \"apiKey\":\"sk_test_LY5kmjV2l7LY5kmjV2l7\"\n}"

headers = {
    'content-type': "application/json"
    }

conn.request("GET", "/tosspay/api/v1/refunds/f0fe4083-fe1b-44e5-ba04-4390bc19bc5e?apiKey=sk_test_apikey1234567890", payload, headers)

res = conn.getresponse()
data = res.read()

print(data.decode("utf-8"))</code><code class="ruby language-ruby">require 'uri'
require 'net/http'

url = URI("https://pay.toss.im/api/v1/refunds/f0fe4083-fe1b-44e5-ba04-4390bc19bc5e?apiKey=sk_test_apikey1234567890")

http = Net::HTTP.new(url.host, url.port)
http.use_ssl = true
http.verify_mode = OpenSSL::SSL::VERIFY_NONE

request = Net::HTTP::Get.new(url)
request["content-type"] = 'application/json'
request.body = "{\n    \"apiKey\":\"sk_test_LY5kmjV2l7LY5kmjV2l7\"\n}"

response = http.request(request)
puts response.read_body</code></pre>
                        <div class="title">Example Response</div>
                        <pre><code class="language-javascript always-visible">{
    "code": 0,
    "refund": {
        "refundNo": "7161b8e3-4b79-49d7-ab3c-3ae898aa073b",
        "status": "SUCCESS",
        "amount": 100,
        "reason": "부분 환불 테스트"
    }
}</code>
            </pre>
                    </div>
                </div>
            </div>



    <script type="text/javascript">
        $(function () {

            // language toggle
            var $languages = $(".languages .language");
            $languages.click(function (e) {
                e.preventDefault();
                var lang = $(this).data("lang");
                $languages.removeClass("selected");
                $(this).addClass("selected");

                $("pre code").hide();
                $("pre code." + lang).css("display", "block");
            });
            $("pre code." + $(".language.selected").data("lang")).css("display", "block");
        });
    </script>
    <script src="js/prism.js"></script>
</body>

</html>
